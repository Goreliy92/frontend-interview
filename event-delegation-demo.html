<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Delegation Exercise - DOM API</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 600px;
      width: 100%;
      padding: 30px;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 20px;
      font-size: 14px;
    }

    .info-box {
      background: #f0f4ff;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }

    .info-box h3 {
      color: #667eea;
      font-size: 16px;
      margin-bottom: 8px;
    }

    .info-box ul {
      margin-left: 20px;
      color: #555;
      font-size: 14px;
      line-height: 1.6;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    #item-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    #item-input:focus {
      outline: none;
      border-color: #667eea;
    }

    #add-item-btn {
      padding: 12px 24px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    #add-item-btn:hover {
      background: #5568d3;
    }

    #add-item-btn:active {
      transform: scale(0.98);
    }

    #item-list {
      list-style: none;
    }

    .item {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s;
    }

    .item:hover {
      background: #f0f0f0;
      transform: translateX(4px);
    }

    .item-text {
      flex: 1;
      color: #333;
      font-size: 15px;
    }

    .item-edit-input {
      flex: 1;
      padding: 8px;
      border: 2px solid #667eea;
      border-radius: 4px;
      font-size: 15px;
    }

    .item-edit-input:focus {
      outline: none;
      border-color: #5568d3;
    }

    .edit-btn,
    .delete-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .edit-btn {
      background: #4caf50;
      color: white;
    }

    .edit-btn:hover {
      background: #45a049;
    }

    .delete-btn {
      background: #f44336;
      color: white;
    }

    .delete-btn:hover {
      background: #da190b;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #999;
      font-style: italic;
    }

    .stats {
      margin-top: 20px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      color: #666;
    }

    .stats strong {
      color: #667eea;
    }

    .clear-btn {
      padding: 6px 12px;
      background: #ff9800;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 13px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .clear-btn:hover {
      background: #e68900;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 24px;
      }

      .input-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¯ Event Delegation Exercise</h1>
    <p class="subtitle">DOM API â€¢ Performance Pattern</p>

    <div class="info-box">
      <h3>ðŸ’¡ What is Event Delegation?</h3>
      <ul>
        <li>Single event listener on parent instead of many on children</li>
        <li>Works with dynamically added elements automatically</li>
        <li>Better performance and less memory usage</li>
        <li>Uses event bubbling to handle child element events</li>
      </ul>
    </div>

    <div class="input-group">
      <input 
        type="text" 
        id="item-input" 
        placeholder="Enter an item (e.g., 'Buy groceries')"
      />
      <button id="add-item-btn">Add Item</button>
    </div>

    <ul id="item-list">
      <!-- Items will be added here dynamically -->
    </ul>

    <div id="empty-state" class="empty-state" style="display: block;">
      No items yet. Add one above to get started! âœ¨
    </div>

    <div class="stats">
      <span>Items: <strong id="item-count">0</strong></span>
      <button class="clear-btn" id="clear-all-btn">Clear All</button>
    </div>
  </div>

  <script type="module">
    // Import the exercise functions
    import { 
      addItem, 
      initEventDelegation, 
      getItemCount,
      clearAllItems 
    } from '/src/exercises/dom/event-delegation.ts';

    // Initialize event delegation
    initEventDelegation();

    // Update item count display
    function updateStats() {
      const count = getItemCount();
      const countEl = document.getElementById('item-count');
      const emptyState = document.getElementById('empty-state');
      
      if (countEl) countEl.textContent = count.toString();
      if (emptyState) {
        emptyState.style.display = count === 0 ? 'block' : 'none';
      }
    }

    // Clear all button
    document.getElementById('clear-all-btn')?.addEventListener('click', () => {
      if (getItemCount() > 0) {
        if (confirm('Are you sure you want to clear all items?')) {
          clearAllItems();
          updateStats();
        }
      }
    });

    // Update stats when items change (using MutationObserver)
    const list = document.getElementById('item-list');
    if (list) {
      const observer = new MutationObserver(updateStats);
      observer.observe(list, { childList: true });
    }

    // Add some demo items
    const demoItems = [
      'ðŸ“ Complete event delegation exercise',
      'ðŸŽ¨ Style the list items',
      'âœ… Test edit and delete functionality'
    ];

    // Uncomment to add demo items on load:
    // demoItems.forEach(item => addItem(item));
    // updateStats();

    console.log('âœ¨ Event Delegation Demo Ready!');
    console.log('ðŸ“š Open the console to see event delegation in action');
    console.log('ðŸ’¡ Try adding, editing, and deleting items');
  </script>
</body>
</html>
